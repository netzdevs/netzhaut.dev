<!-- HTML header for doxygen 1.8.15-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=9"/>
    <meta name="generator" content="Doxygen 1.9.2"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>Netzhaut | Web Browser Engine | Patches</title>
    <link href="tabs.css" rel="stylesheet" type="text/css"/>
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="dynsections.js"></script>
    <link href="navtree.css" rel="stylesheet" type="text/css"/>
    <script type="text/javascript" src="resize.js"></script>
    <script type="text/javascript" src="navtreedata.js"></script>
    <script type="text/javascript" src="navtree.js"></script>
    <link href="search/search.css" rel="stylesheet" type="text/css"/>
    <script type="text/javascript" src="search/searchdata.js"></script>
    <script type="text/javascript" src="search/search.js"></script>
    <script type="text/javascript">
    /* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
      $(document).ready(function() { init_search(); });
    /* @license-end */
    </script>
    <link href="doxygen.css" rel="stylesheet" type="text/css" />
    <link rel="icon" href="../../logo/favicon.png">
    <link href="../../theme/custom.css" rel="stylesheet" type="text/css"/>
  </head>
  <body>  
    <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
      <div id="titlearea">
       <div style="height: 56px;">
        <div style="left:10px;top:5px;position:absolute;">
          <b>Netzhaut</b>
          <br>
          <b>Web Browser Engine</b>
        </div>
        <div style="height:56px;right:10px;top:0px;position:absolute;background-color:#151515;"><a href="https://netzwerkz.org"><img alt="netzwerkz logo" style="height:56px;" src="../../logo/netzwerkz.png"/></a></div>
        <div id="projectlogo"><img alt="netzhaut logo" src="../../logo/netzhaut.png"/></div>
       </div>
      </div>
      <div id="titlearea">
        <div class="topnav">
          <a href="../../index.html">Home</a>
          <a href="../../guides/html/index.html">Guides</a>
          <a href="../../general/html/index.html">General</a>
          <a href="../../architecture/html/index.html">Architecture</a>
          <a href="../../design/html/index.html">Design</a>
          <a href="../../internals/html/index.html">Internals</a>
          <a href="../../api/html/index.html">API</a>
          <a href="../../changelogs/html/index.html">Changelogs</a>
          <a class="active" href="../../patches/html/index.html">Patches</a>
        </div>
       </div>
      </div>
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('group__lib__nhmake__typedefs.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle"><div class="title">Typedefs</div></div>
</div><!--header-->
<div class="contents">
<ul>
<li><p class="startli">* */ -/**</p>
<p class="startli">*/</p>
</li>
<li>+#endif diff --git a/src/lib/nhmake/Common/Types/Private.h b/src/lib/nhmake/Common/Types/Private.h new file mode 100644 index 0000000..ea0b5c1 --- /dev/null +++ b/src/lib/nhmake/Common/Types/Private.h @ -0,0 +1,16 @ +#ifndef NH_MAKE_PRIVATE_H +#define NH_MAKE_PRIVATE_H</li>
<li>+#ifndef DOXYGEN_SHOULD_SKIP_THIS</li>
<li>+/**</li>
<li>* netzhaut - Web Browser Engine</li>
<li>* Copyright (C) 2020 The netzhaut Authors</li>
<li>* Published under MIT</li>
<li>*/</li>
<li>+#include "Public.h"</li>
<li>+#endif</li>
<li>+#endif diff --git a/src/lib/nhmake/Common/Types/Public.h b/src/lib/nhmake/Common/Types/Public.h new file mode 100644 index 0000000..84653b8 --- /dev/null +++ b/src/lib/nhmake/Common/Types/Public.h @ -0,0 +1,177 @ +#ifndef NH_MAKE_PUBLIC_H +#define NH_MAKE_PUBLIC_H</li>
<li>+#ifndef DOXYGEN_SHOULD_SKIP_THIS</li>
<li>+/**</li>
<li>* netzhaut - Web Browser Engine</li>
<li>* Copyright (C) 2020 The netzhaut Authors</li>
<li>* Published under MIT</li>
<li>*/</li>
<li>+#include "../Result.h"</li>
<li>+#include "../../../nhcore/Common/Types/Public.h"</li>
<li>+#endif</li>
<li>+/**</li>
<li>*</li>
<li>*/</li>
<li></li>
<li>typedef struct nh_make_Runtime nh_make_Runtime;</li>
<li>typedef struct nh_make_ChangesNode nh_make_ChangesNode;</li>
<li><p class="startli">+/**</p>
<p class="startli">*/</p>
</li>
<li>+/**</li>
<li>*</li>
<li>*/</li>
<li></li>
<li>typedef NH_MAKE_RESULT (*nh_make_functionCallback_f)(</li>
<li>nh_make_Runtime *Runtime_p, nh_make_Function *Function_p</li>
<li>);</li>
<li></li>
<li>typedef NH_MAKE_RESULT (*nh_make_sourceContextCallback_f)(</li>
<li>nh_make_Runtime *Runtime_p, nh_make_SourceContext *Context_p</li>
<li>);</li>
<li><p class="startli">+/**</p>
<p class="startli">*/</p>
</li>
<li>+/**</li>
<li>*</li>
<li>*/</li>
<li></li>
<li>typedef nh_make_ChangesNode *(*nh_make_parseChangesFile_f)(</li>
<li>NH_BYTE *path_p</li>
<li>);</li>
<li></li>
<li>typedef nh_make_Changes *(*nh_make_getChanges_f)(</li>
<li>nh_make_ChangesNode *Root_p, int *changes_p</li>
<li>);</li>
<li></li>
<li>typedef NH_MAKE_RESULT (*nh_make_printChanges_f)(</li>
<li>nh_make_Runtime *Runtime_p, nh_make_Changes *Changes_p, NH_MAKE_PRINT_CHANGES type</li>
<li>);</li>
<li></li>
<li>typedef NH_MAKE_RESULT (*nh_make_normalizeChanges_f)(</li>
<li>nh_make_Changes *Changes_p, NH_BYTE *changes_p, int length</li>
<li>);</li>
<li></li>
<li>typedef NH_MAKE_RESULT (*nh_make_addDateAndIdToChanges_f)(</li>
<li>nh_make_Changes *Changes_p</li>
<li>);</li>
<li><p class="startli">+/**</p>
<p class="startli">*/</p>
</li>
<li>+#endif diff --git a/src/lib/nhmake/Core/Configure.c b/src/lib/nhmake/Core/Configure.c new file mode 100644 index 0000000..0306839 --- /dev/null +++ b/src/lib/nhmake/Core/Configure.c @ -0,0 +1,149 @ +// LICENSE NOTICE ==================================================================================</li>
<li>+/**</li>
<li>* netzhaut - Web Browser Engine</li>
<li>* Copyright (C) 2021 The netzhaut Authors</li>
<li>* Published under MIT</li>
<li>*/</li>
<li>+// INCLUDE =========================================================================================</li>
<li>+#include "Configure.h" +#include "Thread.h" +#include "File.h" +#include "../Parser/Functions.h" +#include "../Parser/Variables.h"</li>
<li>+#include "../Common/Macros/Macros.h" +#include NH_MAKE_FLOW +#include NH_MAKE_DEFAULT_CHECK</li>
<li>+#include &amp;ltstdio.h&gt; +#include &amp;ltstring.h&gt; +#include &amp;ltstdlib.h&gt; +#include &amp;ltctype.h&gt; +#include &amp;ltunistd.h&gt;</li>
<li>+// ADD =============================================================================================</li>
<li>+NH_MAKE_RESULT nh_make_addFile(</li>
<li>nh_make_Runtime *Runtime_p, NH_BYTE *path_p) +{ +NH_MAKE_BEGIN()</li>
<li></li>
<li>NH_MAKE_CHECK_NULL(Runtime_p)</li>
<li>NH_MAKE_CHECK_NULL(path_p)</li>
<li></li>
<li>NH_MAKE_CHECK(nh_make_appendFile(&amp;Runtime_p-&gt;FileArray, path_p))</li>
<li>+NH_MAKE_DIAGNOSTIC_END(NH_MAKE_SUCCESS) +}</li>
<li>+// SET =============================================================================================</li>
<li>+void nh_make_setFunctionCallback(</li>
<li>nh_make_Runtime *Runtime_p, nh_make_functionCallback_f functionCallback_f) +{ +NH_MAKE_BEGIN()</li>
<li></li>
<li>Runtime_p-&gt;functionCallback_f = functionCallback_f;</li>
<li>+NH_MAKE_SILENT_END() +}</li>
<li>+void nh_make_setSourceContextCallback(</li>
<li>nh_make_Runtime *Runtime_p, nh_make_sourceContextCallback_f sourceContextCallback_f) +{ +NH_MAKE_BEGIN()</li>
<li></li>
<li>Runtime_p-&gt;sourceContextCallback_f = sourceContextCallback_f;</li>
<li>+NH_MAKE_SILENT_END() +}</li>
<li>+void nh_make_setBeforeBuildCallback(</li>
<li>nh_make_Runtime *Runtime_p, nh_make_sourceContextCallback_f sourceContextCallback_f) +{ +NH_MAKE_BEGIN()</li>
<li></li>
<li>Runtime_p-&gt;beforeBuildCallback_f = sourceContextCallback_f;</li>
<li>+NH_MAKE_SILENT_END() +}</li>
<li>+void nh_make_setAfterBuildCallback(</li>
<li>nh_make_Runtime *Runtime_p, nh_make_sourceContextCallback_f sourceContextCallback_f) +{ +NH_MAKE_BEGIN()</li>
<li></li>
<li>Runtime_p-&gt;afterBuildCallback_f = sourceContextCallback_f;</li>
<li>+NH_MAKE_SILENT_END() +}</li>
<li>+nh_make_SourceContextArray *nh_make_getSourceContextArray(</li>
<li>nh_make_Runtime *Runtime_p) +{ +NH_MAKE_BEGIN() +NH_MAKE_END(&amp;Runtime_p-&gt;SourceContextArray) +}</li>
<li>+nh_make_SourceContext *nh_make_getSourceContext(</li>
<li>nh_make_Runtime *Runtime_p, NH_BYTE *name_p) +{ +NH_MAKE_BEGIN()</li>
<li></li>
<li>for (int i = 0; i &amp;lt Runtime_p-&gt;SourceContextArray.length; ++i) {</li>
<li>nh_make_SourceContext *Context_p = &amp;Runtime_p-&gt;SourceContextArray.SourceContexts_p[i];</li>
<li>if (!strcmp(Context_p-&gt;name_p, name_p)) {NH_MAKE_END(Context_p)}</li>
<li>}</li>
<li>+NH_MAKE_END(NULL) +}</li>
<li>+void nh_make_setQuiet(</li>
<li>nh_make_Runtime *Runtime_p, NH_MAKE_BOOL quiet) +{ +NH_MAKE_BEGIN()</li>
<li></li>
<li>Runtime_p-&gt;quiet = quiet;</li>
<li>+NH_MAKE_SILENT_END() +}</li>
<li>+void nh_make_setShowParseTree(</li>
<li>nh_make_Runtime *Runtime_p, NH_MAKE_BOOL showParseTree) +{ +NH_MAKE_BEGIN()</li>
<li></li>
<li>Runtime_p-&gt;showParseTree = showParseTree;</li>
<li>+NH_MAKE_SILENT_END() +}</li>
<li>+NH_MAKE_RESULT nh_make_setVariable(</li>
<li>nh_make_Runtime *Runtime_p, NH_BYTE *variable_p, NH_BYTE **values_pp, int valueCount) +{ +NH_MAKE_BEGIN() +NH_MAKE_END(nh_make_updateVariable(&amp;Runtime_p-&gt;VariableArray, variable_p, values_pp, valueCount)) +}</li>
<li>+nh_make_ValueArray nh_make_getVariableValues(</li>
<li>nh_make_Runtime *Runtime_p, NH_BYTE *variable_p) +{ +NH_MAKE_BEGIN()</li>
<li></li>
<li>nh_make_Variable *Variable_p = nh_make_getVariable(&amp;Runtime_p-&gt;VariableArray, variable_p);</li>
<li></li>
<li>nh_make_ValueArray Values;</li>
<li>Values.values_pp = NULL;</li>
<li>Values.length = 0;</li>
<li></li>
<li>if (Variable_p) {</li>
<li>Values.values_pp = Variable_p-&gt;values_pp;</li>
<li>Values.length = Variable_p-&gt;valueCount;</li>
<li>}</li>
<li>+NH_MAKE_END(Values) +}</li>
<li>diff --git a/src/lib/nhmake/Core/Configure.h b/src/lib/nhmake/Core/Configure.h new file mode 100644 index 0000000..24b6173 --- /dev/null +++ b/src/lib/nhmake/Core/Configure.h @ -0,0 +1,81 @ +#ifndef NH_MAKE_CONFIGURE_H +#define NH_MAKE_CONFIGURE_H</li>
<li>+#ifndef DOXYGEN_SHOULD_SKIP_THIS</li>
<li>+/**</li>
<li>* netzhaut - Web Browser Engine</li>
<li>* Copyright (C) 2021 The netzhaut Authors</li>
<li>* Published under MIT</li>
<li>*/</li>
<li>+#include "Source.h"</li>
<li>+#include "../Common/Types/Private.h"</li>
<li>+#include "../Parser/Parser.h" +#include "../Parser/Variables.h"</li>
<li>+#endif</li>
<li>+/**</li>
<li>*</li>
<li>*/</li>
<li></li>
<li>typedef NH_MAKE_RESULT (*nh_make_addFile_f)(</li>
<li>nh_make_Runtime *Runtime_p, NH_BYTE *path_p</li>
<li>);</li>
<li></li>
<li>typedef void (*nh_make_setFunctionCallback_f)(</li>
<li>nh_make_Runtime *Runtime_p, nh_make_functionCallback_f functionCallback_f</li>
<li>);</li>
<li></li>
<li>typedef void (*nh_make_setSourceContextCallback_f)(</li>
<li>nh_make_Runtime *Runtime_p, nh_make_sourceContextCallback_f sourceContextCallback_f</li>
<li>);</li>
<li></li>
<li>typedef void (*nh_make_setBeforeBuildCallback_f)(</li>
<li>nh_make_Runtime *Runtime_p, nh_make_sourceContextCallback_f sourceContextCallback_f</li>
<li>);</li>
<li></li>
<li>typedef void (*nh_make_setAfterBuildCallback_f)(</li>
<li>nh_make_Runtime *Runtime_p, nh_make_sourceContextCallback_f sourceContextCallback_f</li>
<li>);</li>
<li></li>
<li>typedef nh_make_SourceContextArray *(*nh_make_getSourceContextArray_f)(</li>
<li>nh_make_Runtime *Runtime_p</li>
<li>);</li>
<li></li>
<li>typedef nh_make_SourceContext *(*nh_make_getSourceContext_f)(</li>
<li>nh_make_Runtime *Runtime_p, NH_BYTE *name_p</li>
<li>);</li>
<li></li>
<li>typedef void (*nh_make_setQuiet_f)(</li>
<li>nh_make_Runtime *Runtime_p, NH_MAKE_BOOL quiet</li>
<li>);</li>
<li></li>
<li>typedef void (*nh_make_setShowParseTree_f)(</li>
<li>nh_make_Runtime *Runtime_p, NH_MAKE_BOOL showParseTree</li>
<li>);</li>
<li></li>
<li>typedef NH_MAKE_RESULT (*nh_make_setVariable_f)(</li>
<li>nh_make_Runtime *Runtime_p, NH_BYTE *variable_p, NH_BYTE **values_pp, int valueCount</li>
<li>);</li>
<li></li>
<li>typedef nh_make_ValueArray (*nh_make_getVariableValues_f)(</li>
<li>nh_make_Runtime *Runtime_p, NH_BYTE *variable_p</li>
<li>);</li>
<li><p class="startli">+/**</p>
<p class="startli">*/</p>
</li>
<li>+/**</li>
<li>*</li>
<li>*/</li>
<li></li>
<li>nh_make_SourceContextArray *nh_make_getSourceContextArray(</li>
<li>nh_make_Runtime *Runtime_p</li>
<li>);</li>
<li><p class="startli">+/**</p>
<p class="startli">*/</p>
</li>
<li>+/**</li>
<li>*</li>
<li>*/</li>
<li></li>
<li>typedef NH_BYTE *(*nh_make_getFileData_f)(</li>
<li>const NH_BYTE* path_p, long *size_p</li>
<li>);</li>
<li></li>
<li>typedef NH_MAKE_RESULT (*nh_make_writeBytesToFile_f)(</li>
<li>NH_BYTE *filename_p, NH_BYTE *bytes_p</li>
<li>);</li>
<li><p class="startli">+/**</p>
<p class="startli">*/</p>
</li>
<li>+/**</li>
<li>*</li>
<li>*/</li>
<li></li>
<li>typedef NH_MAKE_RESULT (*nh_make_initialize_f)(</li>
<li>);</li>
<li></li>
<li>typedef void (*nh_make_terminate_f)(</li>
<li>);</li>
<li></li>
<li>typedef nh_make_Runtime *(*nh_make_createRuntime_f)(</li>
<li>NH_BYTE *name_p</li>
<li>);</li>
<li></li>
<li>typedef void (*nh_make_destroyRuntime_f)(</li>
<li>nh_make_Runtime *Runtime_p</li>
<li>);</li>
<li></li>
<li>typedef NH_MAKE_RESULT (*nh_make_run_f)(</li>
<li>nh_make_Runtime *Runtime_p, int argc, NH_BYTE **argv_pp</li>
<li>);</li>
<li></li>
<li>typedef NH_MAKE_RESULT (*nh_make_stringifySourceContextNameAndVersion_f)(</li>
<li>nh_make_SourceContext *SourceContext_p, NH_BYTE string_p[255]</li>
<li>);</li>
<li><p class="startli">+/**</p>
<p class="startli">*/</p>
</li>
<li>+/**</li>
<li>*</li>
<li>*/</li>
<li></li>
<li>typedef int (*nh_make_isRunning_f)(</li>
<li>);</li>
<li></li>
<li>typedef NH_MAKE_RESULT (*nh_make_sleepMs_f)(</li>
<li>int milliseconds</li>
<li>);</li>
<li><p class="startli">+/**</p>
<p class="startli">*/</p>
</li>
<li><p class="startli">+#endif diff --git a/external/selfmake/src/lib/Core/Utils.c b/src/lib/nhmake/Core/Utils.c similarity index 61% rename from external/selfmake/src/lib/Core/Utils.c rename to src/lib/nhmake/Core/Utils.c index 4558430..58b8ccf 100644 --- a/external/selfmake/src/lib/Core/Utils.c +++ b/src/lib/nhmake/Core/Utils.c @ -1,8 +1,8 @ // LICENSE NOTICE ==================================================================================</p>
<p class="startli">/**</p>
</li>
<li>* selfmake - Script Language</li>
<li>* Copyright (C) 2021 The selfmake Authors</li>
<li>* netzhaut - Web Browser Engine</li>
<li>* Copyright (C) 2021 The netzhaut Authors<ul>
<li>Published under MIT */</li>
</ul>
</li>
</ul>
<p >@ -13,8 +13,8 @ #include "../UI/Message.h" #include "../Common/Macros/Macros.h"</p>
<p >-#include SM_FLOW -#include SM_CUSTOM_CHECK +#include NH_MAKE_FLOW +#include NH_MAKE_CUSTOM_CHECK</p>
<p >#include &amp;ltunistd.h&gt; #include &amp;ltstring.h&gt; @ -34,21 +34,21 @</p>
<p >// DIRECTORY =======================================================================================</p>
<p >-static SM_BYTE *procDir_p = NULL; -static SM_BYTE *wrkDir_p = NULL; +static NH_BYTE *procDir_p = NULL; +static NH_BYTE *wrkDir_p = NULL;</p>
<p >-SM_BYTE *sm_getProcessDirectory() +NH_BYTE *nh_make_getProcessDirectory() { -SM_BEGIN()</p><ul>
<li>if (procDir_p) {SM_END(procDir_p)} +NH_MAKE_BEGIN()</li>
<li><p class="startli">if (procDir_p) {NH_MAKE_END(procDir_p)}</p>
<p class="startli">int size = 1024;</p>
</li>
<li>SM_BYTE buffer_p[1024] = {0};</li>
<li><p class="startli">NH_BYTE buffer_p[1024] = {0};</p>
<p class="startli">#if defined(__linux__) if (readlink("/proc/self/exe", buffer_p, size) == -1 &amp;&amp; readlink("/proc/curproc/file", buffer_p, size) == -1</p>
</li>
<li>&amp;&amp; readlink("/proc/self/path/a.out", buffer_p, size) == -1) {SM_END(NULL)}</li>
<li><p class="startli">&amp;&amp; readlink("/proc/self/path/a.out", buffer_p, size) == -1) {NH_MAKE_END(NULL)} #elif defined(__APPLE__) size = 0; _NSGetExecutablePath(NULL, &amp;size); @ -57,100 +57,100 @ SM_BEGIN()</p>
<p class="startli">int i; for (i = strlen(buffer_p); i &gt; -1 &amp;&amp; buffer_p[i] != '/'; --i) {}</p>
</li>
<li>if (i == -1) {SM_END(NULL)}</li>
<li><p class="startli">if (i == -1) {NH_MAKE_END(NULL)} buffer_p[i] = '\0'; // remove exe name</p>
<p class="startli">procDir_p = malloc(strlen(buffer_p) + 1);</p>
</li>
<li>SM_CHECK_NULL(NULL, procDir_p)</li>
<li>NH_MAKE_CHECK_NULL(NULL, procDir_p) sprintf(procDir_p, buffer_p);</li>
</ul>
<p >-SM_END(procDir_p) +NH_MAKE_END(procDir_p) }</p>
<p >-SM_BYTE *sm_getWorkDirectory() +NH_BYTE *nh_make_getWorkDirectory() { -SM_BEGIN() +NH_MAKE_BEGIN()</p>
<ul>
<li>if (wrkDir_p) {SM_END(wrkDir_p)}</li>
<li><p class="startli">if (wrkDir_p) {NH_MAKE_END(wrkDir_p)}</p>
<p class="startli">int size = 1024;</p>
</li>
<li>SM_BYTE buffer_p[1024] = {0};</li>
<li><p class="startli">NH_BYTE buffer_p[1024] = {0}; getcwd(buffer_p, size);</p>
<p class="startli">wrkDir_p = malloc(strlen(buffer_p) + 1);</p>
</li>
<li>SM_CHECK_NULL(NULL, wrkDir_p)</li>
<li>NH_MAKE_CHECK_NULL(NULL, wrkDir_p) sprintf(wrkDir_p, buffer_p);</li>
</ul>
<p >-SM_END(wrkDir_p) +NH_MAKE_END(wrkDir_p) }</p>
<p >-const SM_BYTE *sm_getHomeDir() +const NH_BYTE *nh_make_getHomeDir() { -SM_BEGIN() +NH_MAKE_BEGIN()</p>
<ul>
<li>const SM_BYTE *homedir_p = NULL;</li>
<li>const NH_BYTE *homedir_p = NULL; if ((homedir_p = getenv("HOME")) == NULL) { homedir_p = getpwuid(getuid())-&gt;pw_dir; }</li>
</ul>
<p >-SM_END(homedir_p) +NH_MAKE_END(homedir_p) }</p>
<p >-SM_RESULT sm_createDir(</p><ul>
<li>SM_BYTE *path_p) +NH_MAKE_RESULT nh_make_createDir(</li>
<li>NH_BYTE *path_p) { -SM_BEGIN() +NH_MAKE_BEGIN()</li>
<li>sm_messagef("CREATE DIR %s", path_p);</li>
<li><p class="startli">nh_make_messagef("CREATE DIR %s", path_p);</p>
<p class="startli">struct stat st = {0}; if (stat(path_p, &amp;st) == -1) { int err = mkdir(path_p, 0755); // 0755 aka drwxr-xr-x if (err) {</p>
</li>
<li>SM_DIAGNOSTIC_END(SM_ERROR_CANT_CREATE_DIRECTORY)</li>
<li>NH_MAKE_DIAGNOSTIC_END(NH_MAKE_ERROR_CANT_CREATE_DIRECTORY) } }</li>
</ul>
<p >-SM_DIAGNOSTIC_END(SM_SUCCESS) +NH_MAKE_DIAGNOSTIC_END(NH_MAKE_SUCCESS) }</p>
<p >-SM_RESULT sm_removeDir(</p><ul>
<li>SM_BYTE *path_p) +NH_MAKE_RESULT nh_make_removeDir(</li>
<li>NH_BYTE *path_p) { -SM_BEGIN() +NH_MAKE_BEGIN()</li>
<li>sm_messagef("REMOVE DIR %s", path_p);</li>
<li>nh_make_messagef("REMOVE DIR %s", path_p);</li>
<li>SM_BYTE command_p[255];</li>
<li><p class="startli">NH_BYTE command_p[255]; sprintf(command_p, "rm -r %s", path_p);</p>
<p class="startli">int status = system(command_p);</p>
</li>
<li>if (WEXITSTATUS(status) || WIFSIGNALED(status)) {SM_DIAGNOSTIC_END(SM_ERROR_CP_EXECUTION_FAILED)}</li>
<li>if (WEXITSTATUS(status) || WIFSIGNALED(status)) {NH_MAKE_DIAGNOSTIC_END(NH_MAKE_ERROR_CP_EXECUTION_FAILED)}</li>
</ul>
<p >-SM_DIAGNOSTIC_END(SM_SUCCESS) +NH_MAKE_DIAGNOSTIC_END(NH_MAKE_SUCCESS) }</p>
<p >// COMMAND =========================================================================================</p>
<p >-SM_BOOL sm_canRunCommand(</p><ul>
<li>const SM_BYTE *cmd) +NH_MAKE_BOOL nh_make_canRunCommand(</li>
<li><p class="startli">const NH_BYTE *cmd) { -SM_BEGIN() +NH_MAKE_BEGIN()</p>
<p class="startli">if(strchr(cmd, '/')) { // if cmd includes a slash, no path search must be performed, // go straight to checking if it's executable return access(cmd, X_OK)==0; }</p>
</li>
<li>const SM_BYTE *path = getenv("PATH");</li>
<li>if(!path) {SM_DIAGNOSTIC_END(SM_FALSE)} // something is horribly wrong...</li>
<li>const NH_BYTE *path = getenv("PATH");</li>
<li>if(!path) {NH_MAKE_DIAGNOSTIC_END(NH_MAKE_FALSE)} // something is horribly wrong... // we are sure we won't need a buffer any longer</li>
<li>SM_BYTE *buf = malloc(strlen(path)+strlen(cmd)+3);</li>
<li>if(!buf) {SM_DIAGNOSTIC_END(SM_FALSE)} // actually useless, see comment</li>
<li>NH_BYTE *buf = malloc(strlen(path)+strlen(cmd)+3);</li>
<li>if(!buf) {NH_MAKE_DIAGNOSTIC_END(NH_MAKE_FALSE)} // actually useless, see comment // loop as long as we have stuff to examine in path for(; *path; ++path) { // start from the beginning of the buffer</li>
<li>SM_BYTE *p = buf;</li>
<li>NH_BYTE *p = buf; // copy in buf the current path element for(; *path &amp;&amp; *path!=':'; ++path,++p) { *p = *path; @ -163,7 +163,7 @ SM_BEGIN() // check if we can execute it if(access(buf, X_OK)==0) { free(buf);</li>
<li>SM_DIAGNOSTIC_END(SM_TRUE)</li>
<li>NH_MAKE_DIAGNOSTIC_END(NH_MAKE_TRUE) } // quit at last cycle if(!*path) break; @ -171,6 +171,6 @ SM_BEGIN() // not found free(buf);</li>
</ul>
<p >-SM_DIAGNOSTIC_END(SM_FALSE) +NH_MAKE_DIAGNOSTIC_END(NH_MAKE_FALSE) }</p>
<p >diff --git a/src/lib/nhmake/Core/Utils.h b/src/lib/nhmake/Core/Utils.h new file mode 100644 index 0000000..c00f8ec --- /dev/null +++ b/src/lib/nhmake/Core/Utils.h @ -0,0 +1,54 @ +#ifndef NH_MAKE_UTILS_H +#define NH_MAKE_UTILS_H</p><ul>
<li>+#ifndef DOXYGEN_SHOULD_SKIP_THIS</li>
<li>+/**</li>
<li>* netzhaut - Web Browser Engine</li>
<li>* Copyright (C) 2021 The netzhaut Authors</li>
<li>* Published under MIT</li>
<li>*/</li>
<li>+#include "../Common/Types/Private.h"</li>
<li>+#include &amp;ltstddef.h&gt;</li>
<li>+#endif</li>
<li>+/**</li>
<li>*</li>
<li>*/</li>
<li></li>
<li>typedef NH_BYTE *(*nh_make_getProcessDirectory_f)(</li>
<li>);</li>
<li></li>
<li>typedef NH_BYTE *(*nh_make_getWorkDirectory_f)(</li>
<li>);</li>
<li><p class="startli">+/**</p>
<p class="startli">*/</p>
</li>
<li>+#endif diff --git a/src/lib/nhmake/Core/Version.c b/src/lib/nhmake/Core/Version.c new file mode 100644 index 0000000..5feddd6 --- /dev/null +++ b/src/lib/nhmake/Core/Version.c @ -0,0 +1,130 @ +// LICENSE NOTICE ==================================================================================</li>
<li>+/**</li>
<li>* netzhaut - Web Browser Engine</li>
<li>* Copyright (C) 2021 The netzhaut Authors</li>
<li>* Published under MIT</li>
<li>*/</li>
<li>+// INCLUDE =========================================================================================</li>
<li>+#include "Version.h" +#include "Source.h" +#include "Runtime.h" +#include "Changes.h"</li>
<li>+#include "../Common/Macros/Macros.h" +#include NH_MAKE_FLOW +#include NH_MAKE_DEFAULT_CHECK</li>
<li>+#include &amp;ltstdio.h&gt; +#include &amp;ltstdlib.h&gt; +#include &amp;ltstring.h&gt; +#include &amp;ltunistd.h&gt; +#include &amp;ltctype.h&gt;</li>
<li>+// INIT ============================================================================================</li>
<li>+nh_make_Version nh_make_initVersion() +{ +NH_MAKE_BEGIN()</li>
<li></li>
<li>nh_make_Version Version;</li>
<li></li>
<li>Version.api = 0;</li>
<li>Version.major = 0;</li>
<li>Version.minor = 0;</li>
<li>Version.patch = 0;</li>
<li></li>
<li>memset(Version.apiDate_p, 0, sizeof(long) * 3);</li>
<li>memset(Version.majorDate_p, 0, sizeof(long) * 3);</li>
<li>memset(Version.minorDate_p, 0, sizeof(long) * 3);</li>
<li>memset(Version.patchDate_p, 0, sizeof(long) * 3);</li>
<li>+NH_MAKE_END(Version) +}</li>
<li>+// COMPUTE =========================================================================================</li>
<li>+static NH_MAKE_RESULT nh_make_incrementVersion(</li>
<li>nh_make_Workload *Workload_p, nh_make_SourceContext *Context_p) +{ +NH_MAKE_BEGIN()</li>
<li></li>
<li>if (!Workload_p-&gt;scope_p) {</li>
<li>NH_MAKE_DIAGNOSTIC_END(NH_MAKE_SUCCESS)</li>
<li>}</li>
<li></li>
<li>if (!strcmp(Workload_p-&gt;scope_p, "api")) {</li>
<li>Context_p-&gt;Version.api++;</li>
<li>Context_p-&gt;Version.major = 0;</li>
<li>Context_p-&gt;Version.minor = 0;</li>
<li>Context_p-&gt;Version.patch = 0;</li>
<li>}</li>
<li>else if (!strcmp(Workload_p-&gt;scope_p, "major")) {</li>
<li>Context_p-&gt;Version.major++;</li>
<li>Context_p-&gt;Version.minor = 0;</li>
<li>Context_p-&gt;Version.patch = 0;</li>
<li>}</li>
<li>else if (!strcmp(Workload_p-&gt;scope_p, "minor")) {</li>
<li>Context_p-&gt;Version.minor++;</li>
<li>Context_p-&gt;Version.patch = 0;</li>
<li>}</li>
<li>else if (!strcmp(Workload_p-&gt;scope_p, "patch")) {</li>
<li>Context_p-&gt;Version.patch++;</li>
<li>}</li>
<li>+NH_MAKE_DIAGNOSTIC_END(NH_MAKE_SUCCESS) +}</li>
<li>+NH_MAKE_RESULT nh_make_computeVersion(</li>
<li>nh_make_Runtime *Runtime_p, nh_make_SourceContext *Context_p) +{ +NH_MAKE_BEGIN()</li>
<li></li>
<li>// Reset version.</li>
<li>memset(&amp;Context_p-&gt;Version, 0, sizeof(nh_make_Version));</li>
<li></li>
<li>nh_make_Variable *Variable_p = nh_make_getVariable(&amp;Runtime_p-&gt;VariableArray, "HISTORY");</li>
<li>if (!Variable_p) {NH_MAKE_END(NH_MAKE_SUCCESS)}</li>
<li></li>
<li>nh_make_ChangesNode *Root_p = nh_make_parseChangesFile(Variable_p-&gt;values_pp[0]);</li>
<li>int changes = 0;</li>
<li>nh_make_Changes *Changes_p = nh_make_getChanges((nh_make_ChangesNode*)Root_p, &amp;changes);</li>
<li></li>
<li>for (int i = changes-1; i &gt;= 0; --i) {</li>
<li>nh_make_Changes *Change_p = Changes_p+i;</li>
<li>for (int j = 0; j &amp;lt Change_p-&gt;workloads; ++j) {</li>
<li>nh_make_Workload *Workload_p = Change_p-&gt;Workloads_p+j;</li>
<li>for (int k = 0; k &amp;lt Workload_p-&gt;libs; ++k) {</li>
<li>if (!strcmp(Workload_p-&gt;libs_pp[k], Context_p-&gt;name_p)</li>
<li>&amp;&amp; Context_p-&gt;type != NH_MAKE_SOURCE_CONTEXT_BINARY) {</li>
<li>nh_make_incrementVersion(Workload_p, Context_p);</li>
<li>break;</li>
<li>}</li>
<li>}</li>
<li>for (int k = 0; k &amp;lt Workload_p-&gt;bins; ++k) {</li>
<li>if (!strcmp(Workload_p-&gt;bins_pp[k], Context_p-&gt;name_p)</li>
<li>&amp;&amp; Context_p-&gt;type == NH_MAKE_SOURCE_CONTEXT_BINARY) {</li>
<li>nh_make_incrementVersion(Workload_p, Context_p);</li>
<li>break;</li>
<li>}</li>
<li>}</li>
<li>}</li>
<li>}</li>
<li>+NH_MAKE_DIAGNOSTIC_END(NH_MAKE_SUCCESS) +}</li>
<li>+NH_MAKE_RESULT nh_make_updateVersions(</li>
<li>nh_make_Runtime *Runtime_p) +{ +NH_MAKE_BEGIN()</li>
<li></li>
<li>for (int i = 0; i &amp;lt Runtime_p-&gt;SourceContextArray.length; ++i) {</li>
<li>NH_MAKE_CHECK(nh_make_computeVersion(Runtime_p, Runtime_p-&gt;SourceContextArray.SourceContexts_p+i))</li>
<li>}</li>
<li>+NH_MAKE_DIAGNOSTIC_END(NH_MAKE_SUCCESS) +}</li>
<li>diff --git a/src/lib/nhmake/Core/Version.h b/src/lib/nhmake/Core/Version.h new file mode 100644 index 0000000..7846f41 --- /dev/null +++ b/src/lib/nhmake/Core/Version.h @ -0,0 +1,43 @ +#ifndef NH_MAKE_VERSION_H +#define NH_MAKE_VERSION_H</li>
<li>+#ifndef DOXYGEN_SHOULD_SKIP_THIS</li>
<li>+/**</li>
<li>* netzhaut - Web Browser Engine</li>
<li>* Copyright (C) 2021 The netzhaut Authors</li>
<li>* Published under MIT</li>
<li>*/</li>
<li>+#include "../Common/Types/Private.h"</li>
<li>+#endif</li>
<li>+/**</li>
<li>*</li>
<li>*/</li>
<li></li>
<li>typedef NH_MAKE_RESULT (*nh_make_updateVersions_f)(</li>
<li>nh_make_Runtime *Runtime_p</li>
<li>);</li>
<li><p class="startli">+/**</p>
<p class="startli">*/</p>
</li>
<li><p class="startli">+#endif diff --git a/external/selfmake/src/lib/UI/Message.c b/src/lib/nhmake/UI/Message.c similarity index 50% rename from external/selfmake/src/lib/UI/Message.c rename to src/lib/nhmake/UI/Message.c index 3fcd55f..1f6e1cb 100644 --- a/external/selfmake/src/lib/UI/Message.c +++ b/src/lib/nhmake/UI/Message.c @ -1,8 +1,8 @ // LICENSE NOTICE ==================================================================================</p>
<p class="startli">/**</p>
</li>
<li>* selfmake - Script Language</li>
<li>* Copyright (C) 2021 The selfmake Authors</li>
<li>* netzhaut - Web Browser Engine</li>
<li>* Copyright (C) 2021 The netzhaut Authors<ul>
<li>Published under MIT */</li>
</ul>
</li>
</ul>
<p >@ -15,8 +15,8 @ #include "../Core/Runtime.h" #include "../Core/Utils.h" #include "../Common/Macros/Macros.h" -#include SM_FLOW -#include SM_DEFAULT_CHECK +#include NH_MAKE_FLOW +#include NH_MAKE_DEFAULT_CHECK</p>
<p >#include &amp;ltstdlib.h&gt; #include &amp;ltstdarg.h&gt; @ -29,16 +29,16 @ static unsigned int messages = 0;</p>
<p >// MESSAGE =========================================================================================</p>
<p >-SM_RESULT sm_operationf(</p><ul>
<li>SM_BYTE *format_p, ...) +NH_MAKE_RESULT nh_make_operationf(</li>
<li>NH_BYTE *format_p, ...) { -SM_BEGIN() +NH_MAKE_BEGIN()</li>
<li>sm_Thread *Thread_p = _sm_getThread();</li>
<li>sm_Runtime *Runtime_p = Thread_p &amp;&amp; Thread_p-&gt;Runtime_p ? Thread_p-&gt;Runtime_p : &amp;SM_DEFAULT_RUNTIME;</li>
<li>SM_BYTE *name_p = sm_getVariable(&amp;Runtime_p-&gt;VariableArray, "NAME")-&gt;values_pp[0];</li>
<li>nh_make_Thread *Thread_p = _nh_make_getThread();</li>
<li>nh_make_Runtime *Runtime_p = Thread_p &amp;&amp; Thread_p-&gt;Runtime_p ? Thread_p-&gt;Runtime_p : &amp;NH_MAKE_DEFAULT_RUNTIME;</li>
<li>NH_BYTE *name_p = nh_make_getVariable(&amp;Runtime_p-&gt;VariableArray, "NAME")-&gt;values_pp[0];</li>
<li>if (Runtime_p-&gt;quiet) {SM_DIAGNOSTIC_END(SM_SUCCESS)}</li>
<li><p class="startli">if (Runtime_p-&gt;quiet) {NH_MAKE_DIAGNOSTIC_END(NH_MAKE_SUCCESS)}</p>
<p class="startli">if (Runtime_p-&gt;GUI) { @ -49,7 +49,7 @ SM_BEGIN() va_list args; va_start(args, format_p);</p>
</li>
<li>SM_BYTE message_p[4096] = {'\0'};</li>
<li><p class="startli">NH_BYTE message_p[4096] = {'\0'}; vsprintf(message_p, format_p, args);</p>
<p class="startli">va_end(args); @ -62,19 +62,19 @ SM_BEGIN() messages = 0; }</p>
</li>
</ul>
<p >-SM_DIAGNOSTIC_END(SM_SUCCESS) +NH_MAKE_DIAGNOSTIC_END(NH_MAKE_SUCCESS) }</p>
<p >-SM_RESULT sm_messagef(</p><ul>
<li>SM_BYTE *format_p, ...) +NH_MAKE_RESULT nh_make_messagef(</li>
<li>NH_BYTE *format_p, ...) { -SM_BEGIN() +NH_MAKE_BEGIN()</li>
<li>sm_Thread *Thread_p = _sm_getThread();</li>
<li>sm_Runtime *Runtime_p = Thread_p &amp;&amp; Thread_p-&gt;Runtime_p ? Thread_p-&gt;Runtime_p : &amp;SM_DEFAULT_RUNTIME;</li>
<li>SM_BYTE *name_p = sm_getVariable(&amp;Runtime_p-&gt;VariableArray, "NAME")-&gt;values_pp[0];</li>
<li>nh_make_Thread *Thread_p = _nh_make_getThread();</li>
<li>nh_make_Runtime *Runtime_p = Thread_p &amp;&amp; Thread_p-&gt;Runtime_p ? Thread_p-&gt;Runtime_p : &amp;NH_MAKE_DEFAULT_RUNTIME;</li>
<li>NH_BYTE *name_p = nh_make_getVariable(&amp;Runtime_p-&gt;VariableArray, "NAME")-&gt;values_pp[0];</li>
<li>if (Runtime_p-&gt;quiet) {SM_DIAGNOSTIC_END(SM_SUCCESS)}</li>
<li><p class="startli">if (Runtime_p-&gt;quiet) {NH_MAKE_DIAGNOSTIC_END(NH_MAKE_SUCCESS)}</p>
<p class="startli">if (Runtime_p-&gt;GUI) { @ -88,8 +88,8 @ SM_BEGIN() int size = vsnprintf(NULL, 0, format_p, args); va_end(args);</p>
</li>
<li>SM_BYTE *message_p = malloc(size + 1);</li>
<li>SM_CHECK_NULL(message_p)</li>
<li>NH_BYTE *message_p = malloc(size + 1);</li>
<li><p class="startli">NH_MAKE_CHECK_NULL(message_p) memset(message_p, 0, size + 1);</p>
<p class="startli">va_start(args, format_p); @ -102,19 +102,19 @ SM_BEGIN() free(message_p); }</p>
</li>
</ul>
<p >-SM_DIAGNOSTIC_END(SM_SUCCESS) +NH_MAKE_DIAGNOSTIC_END(NH_MAKE_SUCCESS) }</p>
<p >-SM_RESULT sm_noticef(</p><ul>
<li>SM_BYTE *format_p, ...) +NH_MAKE_RESULT nh_make_noticef(</li>
<li>NH_BYTE *format_p, ...) { -SM_BEGIN() +NH_MAKE_BEGIN()</li>
<li>sm_Thread *Thread_p = _sm_getThread();</li>
<li>sm_Runtime *Runtime_p = Thread_p &amp;&amp; Thread_p-&gt;Runtime_p ? Thread_p-&gt;Runtime_p : &amp;SM_DEFAULT_RUNTIME;</li>
<li>SM_BYTE *name_p = sm_getVariable(&amp;Runtime_p-&gt;VariableArray, "NAME")-&gt;values_pp[0];</li>
<li>nh_make_Thread *Thread_p = _nh_make_getThread();</li>
<li>nh_make_Runtime *Runtime_p = Thread_p &amp;&amp; Thread_p-&gt;Runtime_p ? Thread_p-&gt;Runtime_p : &amp;NH_MAKE_DEFAULT_RUNTIME;</li>
<li>NH_BYTE *name_p = nh_make_getVariable(&amp;Runtime_p-&gt;VariableArray, "NAME")-&gt;values_pp[0];</li>
<li>if (Runtime_p-&gt;quiet) {SM_DIAGNOSTIC_END(SM_SUCCESS)}</li>
<li><p class="startli">if (Runtime_p-&gt;quiet) {NH_MAKE_DIAGNOSTIC_END(NH_MAKE_SUCCESS)}</p>
<p class="startli">if (Runtime_p-&gt;GUI) { @ -128,8 +128,8 @ SM_BEGIN() int size = vsnprintf(NULL, 0, format_p, args); va_end(args);</p>
</li>
<li>SM_BYTE *message_p = malloc(size + 1);</li>
<li>SM_CHECK_NULL(message_p)</li>
<li>NH_BYTE *message_p = malloc(size + 1);</li>
<li><p class="startli">NH_MAKE_CHECK_NULL(message_p) memset(message_p, 0, size + 1);</p>
<p class="startli">va_start(args, format_p); @ -142,19 +142,19 @ SM_BEGIN() free(message_p); }</p>
</li>
</ul>
<p >-SM_DIAGNOSTIC_END(SM_SUCCESS) +NH_MAKE_DIAGNOSTIC_END(NH_MAKE_SUCCESS) }</p>
<p >-SM_RESULT sm_externalMessage(</p><ul>
<li>SM_BYTE *prepend_p, SM_BYTE *message_p) +NH_MAKE_RESULT nh_make_externalMessage(</li>
<li>NH_BYTE *prepend_p, NH_BYTE *message_p) { -SM_BEGIN() +NH_MAKE_BEGIN()</li>
<li>sm_Thread *Thread_p = _sm_getThread();</li>
<li>sm_Runtime *Runtime_p = Thread_p &amp;&amp; Thread_p-&gt;Runtime_p ? Thread_p-&gt;Runtime_p : &amp;SM_DEFAULT_RUNTIME;</li>
<li>SM_BYTE *name_p = sm_getVariable(&amp;Runtime_p-&gt;VariableArray, "NAME")-&gt;values_pp[0];</li>
<li>nh_make_Thread *Thread_p = _nh_make_getThread();</li>
<li>nh_make_Runtime *Runtime_p = Thread_p &amp;&amp; Thread_p-&gt;Runtime_p ? Thread_p-&gt;Runtime_p : &amp;NH_MAKE_DEFAULT_RUNTIME;</li>
<li>NH_BYTE *name_p = nh_make_getVariable(&amp;Runtime_p-&gt;VariableArray, "NAME")-&gt;values_pp[0];</li>
<li>if (Runtime_p-&gt;quiet) {SM_DIAGNOSTIC_END(SM_SUCCESS)}</li>
<li><p class="startli">if (Runtime_p-&gt;quiet) {NH_MAKE_DIAGNOSTIC_END(NH_MAKE_SUCCESS)}</p>
<p class="startli">if (Runtime_p-&gt;GUI) { @ -162,14 +162,14 @ SM_BEGIN() } else {</p>
</li>
<li>SM_BYTE *p = message_p;</li>
<li><p class="startli">NH_BYTE *p = message_p; for (int i = 0; i &amp;lt strlen(message_p); ++i) { if (i + 1 == strlen(message_p)) {i++;}</p>
<p class="startli">if (message_p[i] == '<br  />
' || message_p[i] == '\0') {</p>
</li>
<li>SM_BYTE replace = message_p[i];</li>
<li>NH_BYTE replace = message_p[i]; message_p[i] = '\0'; printf("%s%s\n", prepend_p, p); p = &amp;message_p[i + 1]; @ -179,19 +179,19 @ SM_BEGIN() } }</li>
</ul>
<p >-SM_DIAGNOSTIC_END(SM_SUCCESS) +NH_MAKE_DIAGNOSTIC_END(NH_MAKE_SUCCESS) }</p>
<p >-SM_RESULT sm_exitMessage(</p><ul>
<li>SM_RESULT result) +NH_MAKE_RESULT nh_make_exitMessage(</li>
<li>NH_MAKE_RESULT result) { -SM_BEGIN() +NH_MAKE_BEGIN()</li>
<li>sm_Thread *Thread_p = _sm_getThread();</li>
<li>sm_Runtime *Runtime_p = Thread_p &amp;&amp; Thread_p-&gt;Runtime_p ? Thread_p-&gt;Runtime_p : &amp;SM_DEFAULT_RUNTIME;</li>
<li>SM_BYTE *name_p = sm_getVariable(&amp;Runtime_p-&gt;VariableArray, "NAME")-&gt;values_pp[0];</li>
<li>nh_make_Thread *Thread_p = _nh_make_getThread();</li>
<li>nh_make_Runtime *Runtime_p = Thread_p &amp;&amp; Thread_p-&gt;Runtime_p ? Thread_p-&gt;Runtime_p : &amp;NH_MAKE_DEFAULT_RUNTIME;</li>
<li>NH_BYTE *name_p = nh_make_getVariable(&amp;Runtime_p-&gt;VariableArray, "NAME")-&gt;values_pp[0];</li>
<li>if (Runtime_p-&gt;quiet) {SM_DIAGNOSTIC_END(SM_SUCCESS)}</li>
<li><p class="startli">if (Runtime_p-&gt;quiet) {NH_MAKE_DIAGNOSTIC_END(NH_MAKE_SUCCESS)}</p>
<p class="startli">if (Runtime_p-&gt;GUI) { @ -200,12 +200,12 @ SM_BEGIN() else { if (result) {</p>
</li>
<li>printf("%s: -&gt; \e[1;31mERROR\e[0m %s\n", name_p, SM_RESULTS_PP[result]);</li>
<li>printf("%s: -&gt; \e[1;31mERROR\e[0m %s\n", name_p, NH_MAKE_RESULTS_PP[result]); printf("%s: -&gt; \e[1;31mEXECUTION ERROR\e[0m -&gt; \e[1;31mEXITING\e[0m\n", name_p); } else {printf("%s:\n%s: -&gt; \e[1;32mEXECUTION SUCCESS\e[0m -&gt; \e[1;32mEXITING\e[0m\n", name_p, name_p);} }</li>
</ul>
<p >-SM_DIAGNOSTIC_END(SM_SUCCESS) +NH_MAKE_DIAGNOSTIC_END(NH_MAKE_SUCCESS) }</p>
<p >diff --git a/src/lib/nhmake/UI/Message.h b/src/lib/nhmake/UI/Message.h new file mode 100644 index 0000000..74b687a --- /dev/null +++ b/src/lib/nhmake/UI/Message.h @ -0,0 +1,52 @ +#ifndef NH_MAKE_MESSAGE_H +#define NH_MAKE_MESSAGE_H</p><ul>
<li>+#ifndef DOXYGEN_SHOULD_SKIP_THIS</li>
<li>+/**</li>
<li>* netzhaut - Web Browser Engine</li>
<li>* Copyright (C) 2021 The netzhaut Authors</li>
<li>* Published under MIT</li>
<li>*/</li>
<li>+#include "../Common/Types/Private.h"</li>
<li>+#endif</li>
<li>+/**</li>
<li>*</li>
<li>*/</li>
<li></li>
<li>typedef NH_MAKE_RESULT (*nh_make_messagef_f)(</li>
<li>NH_BYTE *format_p, ...</li>
<li>);</li>
<li>+/** </li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
  <!-- HTML footer for doxygen 1.8.15-->
  <!-- start footer part -->
  <div id="nav-path" class="navpath">
    <!--  -->
    <!-- <li class="footer">Generated by -->
    <!-- <a href="http://www.doxygen.org/index.html"> -->
    <!-- <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.20 </li> -->
    <div id="foot"> 
      <div style="color:#24bbc4;text-align:center;margin:auto;font-size:16px;">
        <b>
<!-- NH_MAKE_INSERT_STAGE_BEGIN -->
prototype.1
<!-- NH_MAKE_INSERT_STAGE_END -->
-
<!-- NH_MAKE_INSERT_API_VERSION_BEGIN -->
ver.0.2.3.0
<!-- NH_MAKE_INSERT_API_VERSION_END -->
-
<!-- NH_MAKE_INSERT_REVISION_BEGIN -->
rev.08400
<!-- NH_MAKE_INSERT_REVISION_END -->
          </b>
        </div>
      </div>
    </div>
  </body>
  <style>
    #foot {display: flex; padding-top:13px; padding-bottom:14px; background: #151515; border-top: 3px solid #24bbc4; justify-content: space-between;}
  </style>
</html>
